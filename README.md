# Дипломная работа «Облачное хранилище»
Стек: Spring Boot, Spring Security, Spring Data JPA, PostgreSQL, JUnit, Mockito, Maven, Docker.
## Описание
Проект предоставляет собой REST сервис для загрузки, скачивания, переименования, удаления и вывода списка загруженных файлов пользователя. 
Все запросы к сервису авторизованы.
Веб приложение (FRONT) подключается к сервису и использует его функционал для манипуляции с файлами.
## Запуск FRONT приложения
Репозиторий FRONT приложения доступен по адресу https://github.com/mrsBlonda/Diplom_Frontent.
Для запуска FRONT приложения необходимо:
1. Скачать репозиторий и распаковать его в локальную папку
2. Установить node.js версии 16.17 (с этой версией запускается точно)
3. Перейти в папку FRONT приложения в командной строке и выполнить команды `npm install` затем `npm run serve`
4. Открыть в браузере страницу по адресу http://localhost:8080/

FRONT отправляет запросы по адресу http://localhost:9090/ на котором стартует REST приложение.
## Запуск REST приложения
Для запуска приложения используются команды Docker
1. Скачать или склонировать репозиторий приложения в программу IntelliJ IDEA
2. Упаковать проект в Maven
3. В терминале приложения командой `docker build -t restapp .` создать образ приложения
4. Упаковать образ в контейнер командой `docker-compose build`
5. Запустить контейнер командой `docker-compose up`

Для остановки приложения нажать Ctrl+C
## Пример использования
В приложении можно авторизоваться используя данные: имя пользователя - `user`, пароль `password`
После этого можно загружать любые файлы размером до 100Мб
## Схема приложения
![Схема классов](https://user-images.githubusercontent.com/98458226/200128244-74ccfd9f-0888-4aaa-890f-d160c485972e.png)
## Взаимодействие приложений
FRONT приложение отправляет credentials в теле запроса на эндпоинт /login BACKEND приложения.
Запрос проходит через CORS filter, CSRF filter, перехватывается JwtTokenFilter и передается далее на аутентификацию.
В случае успешной аутентификации генерируется токен, которые возвращается на FRONT в ответе с заголовком `auth-token`
Все дальнешие запросы FRONT делает с этим токеном в заголовке `auth-token`.
При выходе из приложения вызывается метод BACKEND /logout, который удаляет токен из TokenStore и все дальнейшие запросы с этим токеном не действительны.
